<?xml version="1.0" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="execution">
    <html>
      <head>
	<link rel="stylesheet" href="style.css" />
      </head>
      <body>
	<xsl:apply-templates></xsl:apply-templates>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="step">
    <div class="step">
      <xsl:apply-templates></xsl:apply-templates>
    </div>
  </xsl:template>

  <xsl:template match="numero">
    <span class="step-numero">Etape nÂ°<xsl:value-of select="text()" /></span>
  </xsl:template>

  <xsl:template match="remaining"><!-- TODO : handle --></xsl:template>
  <xsl:template match="item-size"><!-- TODO : handle --></xsl:template>

  <xsl:template match="bins">
    <div id="bins">
      <xsl:apply-templates></xsl:apply-templates>
    </div>
  </xsl:template>

  <xsl:template match="bin">
    <div class="bin">
      <xsl:apply-templates select="capacity"></xsl:apply-templates>
      <xsl:apply-templates select="loading"></xsl:apply-templates>
    </div>
  </xsl:template>

  <xsl:template match="loading">
    <div class="empty">
      <xsl:attribute name="style">height:<xsl:value-of select="100 - text()" />%</xsl:attribute>
    </div>
    <div class="loading">
      <xsl:attribute name="style">height:<xsl:value-of select="text()" />%</xsl:attribute>
      <xsl:apply-templates select="../items/item">
      </xsl:apply-templates>
    </div>
    <span class="loading-value"><xsl:value-of select="text()" /></span>
  </xsl:template>

  <xsl:template match="items">
    <div class="items">
      <xsl:apply-templates select="item"></xsl:apply-templates>
    </div>
  </xsl:template>
    
  
  <xsl:template match="item">
    <xsl:variable name="loading" select="../../loading"></xsl:variable>
    <div class="item">
      <xsl:attribute name="style">height:<xsl:value-of select="(text() div $loading) * 100" />%</xsl:attribute>
    </div>
  </xsl:template>

  
  <xsl:template match="capacity">
    <span class="capacity"><xsl:value-of select="text()" /></span>    
  </xsl:template>
  
  <xsl:template match="index"></xsl:template>
</xsl:stylesheet>

